import{d as x,B,r,P as O,f as N,g as q,o as l,c as d,a as t,b as n,h as a,k as u,s as y,t as _,j as M,w as k,M as S,y as D,T as h,N as F,p as z,m as H,H as T,_ as j}from"./index-1b99f42b.js";import{B as m}from"./BaseInput-a7f31ac3.js";import{S as A,H as G}from"./SemipolarSpinner-83f104ea.js";const C=v=>(z("data-v-d4b5b08b"),v=v(),H(),v),R={class:"LoginForm"},W=F('<div class="info-section" data-v-d4b5b08b><div class="first-block" data-v-d4b5b08b><div class="logo" data-v-d4b5b08b><p data-v-d4b5b08b>Online Shopping store</p><img src="'+T+'" alt="" data-v-d4b5b08b></div><h1 data-v-d4b5b08b>Log In</h1></div><div class="divider" data-v-d4b5b08b></div><p class="detail" data-v-d4b5b08b>We do not share your personal details with anyone</p></div>',1),J={class:"form-groups"},K={key:0,class:"login-loader"},Q=["onSubmit"],X={class:"first-form"},Y={key:0,class:"errorS"},Z=C(()=>t("button",{class:"button",type:"submit"},"Log In",-1)),ee=C(()=>t("div",{class:"divider"},[t("span",null,"or")],-1)),se={class:"otp-form-group"},oe={key:1,class:"otpInput"},te=["disabled"],ae=["onSubmit"],ie={class:"resetPass-form-group"},le=["disabled"],ne=x({__name:"login",setup(v){const e=B(),V=r(!1),o=r({email:"",password:"",sndPassword:""}),f=r(!1),p=r(0),P=r(),g=r(),c=r(),w=r(),L=()=>{o.value.email&&e.isValid.isEmail?e.sendLoginCode(o.value.email):e.errorMassage="please enter your Email address"},I=()=>{o.value.email&&p.value?e.verify(o.value.email,p.value):e.errorMassage="Fill inputs"},E=()=>{e.errorMassage="",e.isValid.isEmail&&e.isValid.isPassword&&(V.value=!0,e.login(o.value))},U=()=>{e.isVerified=!1,e.errorMassage="",o.value.password==o.value.sndPassword&&e.resetPass(o)};return O(()=>o.value.sndPassword,()=>{o.value.password==o.value.sndPassword?e.errorMassage="Passwords are match":e.errorMassage="Passwords aren't match"}),N(()=>(e.errorMassage="",e.showOtp=!1,e.loading=!1,e.isVerified=!1)),(b,s)=>{const $=q("vue-feather");return l(),d("form",R,[W,t("div",J,[t("button",{type:"button",class:"close",onClick:s[0]||(s[0]=i=>b.$emit("closeLoginModal"))},[n($,{type:"x",size:"2.5em",stroke:"#159347","stroke-width":"2"})]),V.value&&!a(e).errorMassage?(l(),d("div",K,[n(a(A),{class:"login-loader-item","animation-duration":2e3,size:65,color:"#159347"})])):u("",!0),f.value?u("",!0):(l(),d("form",{key:1,autocomplete:"off",onSubmit:y(E,["prevent"])},[t("div",X,[n(m,{modelValue:o.value.email,"onUpdate:modelValue":s[1]||(s[1]=i=>o.value.email=i),"input-type":"email","input-id":"Email","is-required":!0},null,8,["modelValue"]),n(m,{modelValue:o.value.password,"onUpdate:modelValue":s[2]||(s[2]=i=>o.value.password=i),"input-type":"password","input-id":"Password","is-required":!0},null,8,["modelValue"]),a(e).errorMassage?(l(),d("span",Y,_(a(e).errorMassage),1)):u("",!0),Z,ee,t("button",{class:"button",type:"button",onClick:s[3]||(s[3]=i=>f.value=!0)},"Login with OTP"),t("span",{class:"goSignup",onClick:s[4]||(s[4]=i=>b.$emit("gotoSignup"))},"Don't have an account? Sign Up")])],40,Q)),f.value&&!a(e).isVerified?(l(),d("form",{key:2,autocomplete:"off",onSubmit:s[11]||(s[11]=y(()=>{},["prevent"]))},[n(h,{name:"otpLoginForm"},{default:M(()=>[t("div",se,[n(m,{modelValue:o.value.email,"onUpdate:modelValue":s[5]||(s[5]=i=>o.value.email=i),"input-type":"email","input-id":"Email","is-required":!0},null,8,["modelValue"]),k(t("span",{class:"errorS"},_(a(e).errorMassage),513),[[S,a(e).errorMassage]]),a(e).loading?(l(),D(a(G),{key:0,class:"loadSpinner","animation-duration":1e3,"dot-size":10,"dots-num":3,color:"#159347"})):u("",!0),a(e).showOtp?(l(),d("div",oe,[t("input",{class:"otp",type:"number",id:"1",ref_key:"otp1",ref:P,maxlength:"1",onInput:s[6]||(s[6]=()=>{p.value=P.value.value,g.value.focus()})},null,544),t("input",{class:"otp",type:"number",id:"2",ref_key:"otp2",ref:g,maxlength:"1",onInput:s[7]||(s[7]=()=>{p.value+=g.value.value,c.value.focus()})},null,544),t("input",{class:"otp",type:"number",id:"3",ref_key:"otp3",ref:c,maxlength:"1",onInput:s[8]||(s[8]=()=>{p.value+=c.value.value,w.value.focus()})},null,544),t("input",{class:"otp",type:"number",id:"4",ref_key:"otp4",ref:w,maxlength:"1",onInput:s[9]||(s[9]=()=>{p.value+=w.value.value})},null,544)])):u("",!0),a(e).showOtp?u("",!0):(l(),d("button",{key:2,class:"button",type:"submit",onClick:L,disabled:!a(e).isValid.isEmail},"Continue",8,te)),a(e).showOtp?(l(),d("button",{key:3,class:"button",type:"button",onClick:I},"Verify")):u("",!0),t("span",{class:"loginLink",onClick:s[10]||(s[10]=i=>b.$emit("gotoSignup"))},"Exiting User? Sign Up")])]),_:1})],32)):u("",!0),k(t("form",{autocomplete:"off",onSubmit:y(U,["prevent"])},[n(h,{name:"otpLoginForm"},{default:M(()=>[t("div",ie,[n(m,{modelValue:o.value.password,"onUpdate:modelValue":s[12]||(s[12]=i=>o.value.password=i),"input-type":"password","input-id":"New Password","is-required":!0},null,8,["modelValue"]),n(m,{modelValue:o.value.sndPassword,"onUpdate:modelValue":s[13]||(s[13]=i=>o.value.sndPassword=i),"input-type":"password","input-id":"Confirm Password","is-required":!0},null,8,["modelValue"]),k(t("span",{class:"errorS"},_(a(e).errorMassage),513),[[S,o.value.sndPassword]]),t("button",{class:"button",type:"submit",disabled:o.value.password!==o.value.sndPassword},"Reset Password",8,le),t("span",{class:"loginLink",onClick:s[14]||(s[14]=i=>b.$emit("gotoSignup"))},"Exiting User? Log In")])]),_:1})],40,ae),[[S,a(e).isVerified]])])])}}});const pe=j(ne,[["__scopeId","data-v-d4b5b08b"]]);export{pe as default};
